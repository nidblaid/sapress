<?xml version="1.0" encoding="UTF-8"?>
<odoo>

    <record id="sochepress_destination_search_filter" model="ir.ui.view">
        <field name="name">sochepress.destination.search</field>
        <field name="model">sochepress.destination</field>
        <field name="arch" type="xml">
            <search string="Destination">
                <field name="name"/>
                <field name="type"/>
                <field name="responsable_caisse_id"
                       attrs="{'invisible': [('type', '=', 'client_final')]}"/>
            </search>
        </field>
    </record>

    <record id="sochepress_destination_form_view" model="ir.ui.view">
        <field name="name">sochepress.destination.form</field>
        <field name="model">sochepress.destination</field>
        <field name="arch" type="xml">
            <form string="Destination">
                <sheet>
                    <div class="oe_title">
                        <h1>
                            <field name="name"/>
                        </h1>
                    </div>
                    <group>
                        <group>
                            <field name="agency_code"
                                   attrs="{'invisible': [('type', '!=', 'agence')]}"/>
                            <field name="parent_id" attrs="{'invisible': [('type', '!=', 'agence')]}"/>
                            <field name="active" invisible="1"/>
                            <!--                            <field name="responsable_caisse_id" attrs="{'invisible': [('type', '=', 'client_final')]}"/>-->

                        </group>
                        <group>
                            <field name="type"/>
                            <field name="operational_manager_id"
                                   attrs="{'invisible': [('type', '!=', 'agence')], 'required': [('type', '=', 'agence')]}"
                                   context="{'default_agence_id': active_id}"/>
                            <field name="responsable_caisse_id"
                                   attrs="{'invisible': [('type', '!=', 'agence')], 'required': [('type', '=', 'agence')]}"
                                   context="{'default_agence_id': active_id}"/>
                            <field name="stock_location_id"
                                   attrs="{'invisible': [('type', '!=', 'agence')], 'required': [('type', '=', 'agence')]}"/>
                            <field name="cash_journal_id"
                                   attrs="{'invisible': [('type', '!=', 'agence')], 'required': [('type', '=', 'agence')]}"/>
                            <field name="bank_journal_ids"
                                   attrs="{'invisible': [('type', '!=', 'agence')], 'required': [('type', '=', 'agence')]}"
                                   widget="many2many_tags"/>
                            <field name="postal_code"
                                   attrs="{'invisible': [('type', '!=', 'agence')]}"/>
                        </group>
                    </group>
                    <notebook>
                        <page name="locations" string="Localisations associÃ©es"
                              attrs="{'invisible': [('type', '!=', 'agence')]}">
                            <field name="locations_ids" widget="many2many"/>
                        </page>
                        <page name="resources" string="Ressources" attrs="{'invisible': [('type', '!=', 'agence')]}">
                            <field name="resources_ids" widget="many2many"/>
                        </page>

                    </notebook>
                </sheet>
            </form>
        </field>
    </record>

    <record id="sochepress_destination_agence_tree_view" model="ir.ui.view">
        <field name="name">sochepress.destination.agence.tree</field>
        <field name="model">sochepress.destination</field>
        <field name="arch" type="xml">
            <tree string="Destination">
                <field name="agency_code"/>
                <field name="name"/>
                <field name="type"/>
                <field name="operational_manager_id"/>
                <field name="responsable_caisse_id"/>
                <field name="cash_journal_id"/>
                <field name="stock_location_id"/>
            </tree>
        </field>
    </record>

    <record id="sochepress_destination_tree_view" model="ir.ui.view">
        <field name="name">sochepress.destination.tree</field>
        <field name="model">sochepress.destination</field>
        <field name="arch" type="xml">
            <tree string="Destination" default_order="create_date desc">
                <field name="name"/>
                <field name="type"/>
                <field name="create_date" invisible="1"/>
                <field name="responsable_caisse_id"
                       attrs="{'invisible': [('type', '=', 'client_final')]}"/>
            </tree>
        </field>
    </record>

    <record model="ir.actions.act_window" id="sochepress_destination_action">
        <field name="name">Destinations</field>
        <field name="res_model">sochepress.destination</field>
        <field name="view_ids" eval="[(5, 0, 0),
            (0, 0, {'view_mode': 'tree', 'view_id': ref('sochepress_destination_tree_view')}),
            (0, 0, {'view_mode': 'form', 'view_id': ref('sochepress_destination_form_view')})]"/>
        <field name="view_mode">tree,form</field>
        <field name="search_view_id"
               ref="sochepress_base.sochepress_destination_search_filter"/>
    </record>


    <!--     MOTIFS D'ABANDONS-->


    <record id="sochepress_motif_abandon_search_filter" model="ir.ui.view">
        <field name="name">sochepress.motif.abandon.search</field>
        <field name="model">sochepress.motif.abandon</field>
        <field name="arch" type="xml">
            <search string="Abandon motivation">
                <field name="name"/>
            </search>
        </field>
    </record>

    <record id="sochepress_motif_abandon_tree_view" model="ir.ui.view">
        <field name="name">sochepress.motif.abandon.tree</field>
        <field name="model">sochepress.motif.abandon</field>
        <field name="arch" type="xml">
            <tree editable="top" string="Abandon motivation" default_order="create_date desc">
                <field name="name"/>
                <field name="create_date" invisible="1"/>
            </tree>
        </field>
    </record>

    <record id="sochepress_motif_abandon_wizard_form_view" model="ir.ui.view">
        <field name="name">sochepress.motif.abandon.wizard.form</field>
        <field name="model">sochepress.motif.abandon.wizard</field>
        <field name="arch" type="xml">
            <form string="Abandon motivation">
                <group>
                    <field name="customer_lost_reason_id"
                           options="{'no_create': True}"/>
                </group>
                <footer>
                    <button name="submit" string="Submit" class="oe_highlight"
                            type="object"/>
                    <button special="cancel" string="Cancel"/>
                </footer>
            </form>
        </field>
    </record>

    <record model="ir.actions.act_window" id="sochepress_motif_abandon_action">
        <field name="name">Abandon motivation</field>
        <field name="res_model">sochepress.motif.abandon</field>
        <field name="view_mode">tree</field>
        <field name="search_view_id"
               ref="sochepress_base.sochepress_motif_abandon_search_filter"/>
    </record>


    <record model="ir.actions.act_window" id="sochepress_motif_abandon_wizard_action">
        <field name="name">Abandon motivation</field>
        <field name="res_model">sochepress.motif.abandon.wizard</field>
        <field name="context">{'default_request_id': active_id}</field>
        <field name="view_id"
               ref="sochepress_base.sochepress_motif_abandon_wizard_form_view"/>
        <field name="target">new</field>
    </record>

    <!--                        CONTRACT STAGES                                        -->

    <record id="sochepress_contract_stage_search_filter" model="ir.ui.view">
        <field name="name">sochepress.contract.stage.search</field>
        <field name="model">sochepress.contract.stage</field>
        <field name="arch" type="xml">
            <search string="Contract stage">
                <field name="name"/>
            </search>
        </field>
    </record>

    <record id="sochepress_contract_stage_form_view" model="ir.ui.view">
        <field name="name">sochepress.contract.stage.form</field>
        <field name="model">sochepress.contract.stage</field>
        <field name="arch" type="xml">
            <form string="Contract stage">
                <sheet>
                    <group>
                        <group>
                            <field name="name"/>
                            <field name="sequence"/>
                        </group>
                        <group>
                            <field name="fold"/>
                        </group>
                    </group>
                    <separator string="Requirements"/>
                    <field name="description"/>
                </sheet>
            </form>
        </field>
    </record>

    <record id="sochepress_contract_stage_tree_view" model="ir.ui.view">
        <field name="name">sochepress.contract.stage.tree</field>
        <field name="model">sochepress.contract.stage</field>
        <field name="arch" type="xml">
            <tree string="Contract stage" default_order="create_date desc">
                <field name="name"/>
                <field name="create_date" invisible="1"/>
            </tree>
        </field>
    </record>

    <record model="ir.actions.act_window" id="sochepress_contract_stage_action">
        <field name="name">Contract stages</field>
        <field name="res_model">sochepress.contract.stage</field>
        <field name="view_mode">tree,form</field>
        <field name="search_view_id"
               ref="sochepress_base.sochepress_contract_stage_form_view"/>
    </record>


    <!--    ETATS DE COLIS-->


    <record id="sochepress_etat_colis_search_filter" model="ir.ui.view">
        <field name="name">sochepress.etat.colis.search</field>
        <field name="model">sochepress.etat.colis</field>
        <field name="arch" type="xml">
            <search string="Colis state">
                <field name="name"/>
            </search>
        </field>
    </record>

    <record id="sochepress_etat_colis_tree_view" model="ir.ui.view">
        <field name="name">sochepress.etat.colis.tree</field>
        <field name="model">sochepress.etat.colis</field>
        <field name="arch" type="xml">
            <tree editable="top" string="State of colis" default_order="create_date desc">
                <field name="name"/>
                <field name="create_date" invisible="1"/>
            </tree>
        </field>
    </record>

    <record model="ir.actions.act_window" id="sochepress_etat_colis_action">
        <field name="name">State of colis</field>
        <field name="res_model">sochepress.etat.colis</field>
        <field name="view_mode">tree</field>
        <field name="search_view_id"
               ref="sochepress_base.sochepress_etat_colis_search_filter"/>
    </record>


    <record model="ir.actions.act_window" id="sochepress_agences_action">
        <field name="name">Agencies</field>
        <field name="res_model">sochepress.destination</field>
        <field name="view_ids" eval="[(5, 0, 0),
            (0, 0, {'view_mode': 'tree', 'view_id': ref('sochepress_destination_agence_tree_view')}),
            (0, 0, {'view_mode': 'form', 'view_id': ref('sochepress_destination_form_view')})]"/>
        <field name="view_mode">tree,form</field>
        <field name="context">{'default_type':'agence', }</field>
        <field name="domain">[('type', '=', 'agence')]</field>
    </record>
    <record model="ir.actions.act_window" id="sochepress_plateformes_action">
        <field name="name">Platforms</field>
        <field name="res_model">sochepress.destination</field>
        <field name="view_ids" eval="[(5, 0, 0),
            (0, 0, {'view_mode': 'tree', 'view_id': ref('sochepress_destination_tree_view')}),
            (0, 0, {'view_mode': 'form', 'view_id': ref('sochepress_destination_form_view')})]"/>
        <field name="view_mode">tree,form</field>
        <field name="context">{'default_type':'plateforme', }</field>
        <field name="domain">[('type', '=', 'plateforme')]</field>
    </record>
</odoo>
